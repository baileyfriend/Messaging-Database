CREATE TABLE users(
userID INTEGER PRIMARY KEY, --for some reason uid breaks sqlplus
EMAIL VARCHAR(254) NOT NULL,--this is the max length of an email with domain
FNAME VARCHAR(35) NOT NULL,
LNAME VARCHAR(35) NOT NULL
--uIC1:userID is the primary key - generated by app - no two will be the same
--constraint uIC1 primary key(userID)
);

Create table conversation
(
  cid integer not null,
  constraint cIC1 primary key(cid)
);

Create table message --this is a weak entity
(
  timeSent TIMESTAMP PRIMARY KEY, --part of key
  muid INTEGER NOT NULL, --message user id - part of key
  mcid INTEGER NOT NULL, --part of key - message conversation id
  txt LONG NOT NULL, --contents of the message - contains text and cannot send a null message
  --create constraints - weak entity defined by timesent, user.uid, conversation.cid
  --constraint messagePKey primary key(timeSent),
  constraint messageForeignKey1 foreign key(muid) references users(userID) ON DELETE SET NULL,
  constraint messageForeignKey2 foreign key(mcid) references conversation(cid) ON DELETE SET NULL
);

Create table media  --can only send one media per message
(
  timeSent time not null, --foreign key
  muid number not null, --foreign key
  mcid number not null, --foreign key
  fileType varchar(4),
  fileName varchar(260),

  --Constraints:
  constraint mediaFkey foreign key(muid, mcid, timeSent) references message(muid, mcid, timeSent)
);

Create table takesPartIn
(
  userID number not null,
  cid number not null,
--foreign keys from user and conversation
  constraint userForeignKey foreign key(userID) references users(userID),
  constraint convForeignKey foreign key(cid) references conversation(cid)
);
